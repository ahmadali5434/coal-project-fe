<div class="pt-1 space-y-1">
  <!-- === Status Cards === -->
  <div class="grid grid-cols-5 sm:grid-cols-2 lg:grid-cols-5 gap-0">
    <div
      *ngFor="let stat of purchaseStats()"
      class="relative rounded-2xl  h-[40px] w-[170px] text-center py-1 px-2 text-white shadow cursor-pointer transition-transform hover:scale-105"
      [style.background-color]="stat.color"
      [class.opacity-50]="selectedStatus() === stat.status"
      (click)="filterByStatus(stat.status)"
    >
      <div
        *ngIf="stat.count > 0"
        class="absolute -top-2 -right-2
               min-w-[26px] h-[26px] px-1
               bg-red-600 text-white text-sm font-bold
               rounded-full flex items-center justify-center shadow-md">
        {{ stat.count }}
      </div>
      <div class="text-lg font-semibold">
        {{ stat.title }}
      </div>
    </div>

    <!-- === Filter Info + Reset Button === -->
    <div class="flex flex-row-reverse justify-between items-center">
      <div class="flex gap-2">
        <button
          *ngIf="selectedStatus()"
          mat-stroked-button
          class="border-blue-600 text-blue-700 hover:bg-blue-50"
          (click)="resetFilter()"
        >
          Show All
        </button>
        <button
          *hasPermission="'purchase:create'"
          mat-flat-button
          color="primary"
          cdkFocusInitial
          (click)="onBuyStock()"
        >
          Buy Stock
        </button>
      </div>
    </div>
  </div>

  <!-- === Purchase Table === -->
  <div *ngIf="purchaseList().length > 0" class="mt-8">
    <ag-grid-angular
      style="width: 100%; height: 90vh"
      [rowData]="purchaseList()"
      [gridOptions]="gridOptions"
      [columnDefs]="colDefs"
      [theme]="'legacy'"
      class="ag-theme-alpine"
    />
  </div>

  <!-- === Empty State === -->
  <div
    *ngIf="purchaseList().length === 0"
    class="text-center text-gray-500 py-12"
  >
    <p>No purchases found for the selected status.</p>
  </div>
</div>
