<div class="pt-1 space-y-1">
  <!-- === Status Cards === -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
    <div
      *ngFor="let stat of purchaseStats()"
      class="rounded-2xl text-center py-2 px-1 text-white shadow cursor-pointer transition-transform hover:scale-105"
      [style.background-color]="stat.color"
      [class.opacity-50]="selectedStatus() === stat.status"
      (click)="filterByStatus(stat.status)"
    >
      <div class="text-lg font-semibold">
        {{ stat.title }} = {{ stat.count }}
      </div>
    </div>

    <!-- === Filter Info + Reset Button === -->
    <div class="flex flex-row-reverse justify-between items-center">
      <div class="flex gap-2">
        <button
          *ngIf="selectedStatus()"
          mat-stroked-button
          color="primary"
          (click)="resetFilter()"
        >
          Show All
        </button>
        <button
          *hasPermission="'purchase:create'"
          mat-flat-button
          color="primary"
          cdkFocusInitial
          (click)="onBuyStock()"
        >
          Buy Stock
        </button>
      </div>
    </div>
  </div>

  <!-- === Purchase Table === -->
  <div *ngIf="purchaseList().length > 0" class="mt-8">
    <ag-grid-angular
      style="width: 100%; height: 90vh"
      [rowData]="purchaseList()"
      [gridOptions]="gridOptions"
      [columnDefs]="colDefs"
       [defaultColDef]="defaultColDef"
      [theme]="'legacy'"
      class="ag-theme-alpine"
    />
  </div>

  <!-- === Empty State === -->
  <div
    *ngIf="purchaseList().length === 0"
    class="text-center text-gray-500 py-12"
  >
    <p>No purchases found for the selected status.</p>
  </div>
</div>
